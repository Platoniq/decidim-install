<!DOCTYPE html>

<html lang="en-US">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=Edge">

  
    <title>Advanced config & tricks - Decidim Install guide by Platoniq</title>

    
  

  <link rel="shortcut icon" href="http://localhost:4000/favicon.ico" type="image/x-icon">

  <link rel="stylesheet" href="http://localhost:4000/assets/css/just-the-docs.css">

  

  
    <script type="text/javascript" src="http://localhost:4000/assets/js/vendor/lunr.min.js"></script>
  
  <script type="text/javascript" src="http://localhost:4000/assets/js/just-the-docs.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1">

<!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Advanced config &amp; tricks | Decidim Install guide by Platoniq</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Advanced config &amp; tricks" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="A step by step guide to install Decidim for newcommers" />
<meta property="og:description" content="A step by step guide to install Decidim for newcommers" />
<link rel="canonical" href="http://localhost:4000/advanced-config/" />
<meta property="og:url" content="http://localhost:4000/advanced-config/" />
<meta property="og:site_name" content="Decidim Install guide by Platoniq" />
<script type="application/ld+json">
{"description":"A step by step guide to install Decidim for newcommers","headline":"Advanced config &amp; tricks","@type":"WebPage","url":"http://localhost:4000/advanced-config/","@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

<body>

  <div class="page-wrap">
    <div class="side-bar">
      <a href="http://localhost:4000/" class="site-title fs-6 lh-tight">Decidim Install guide by Platoniq</a>
      <span class="fs-3"><button class="js-main-nav-trigger navigation-list-toggle btn btn-outline" type="button" data-text-toggle="Hide">Menu</button></span>
      <div class="navigation main-nav js-main-nav">
        <nav role="navigation" aria-label="Main navigation">
  <ul class="navigation-list">
    
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/" class="navigation-list-link">Installing Decidim</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/decidim-bionic/" class="navigation-list-link">Install Decidim on Ubuntu 18.04</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/basic-config/" class="navigation-list-link">Minimal configuration of Decidim</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/decidim-aws/" class="navigation-list-link">Installing in Amazon AWS with ElasticBeanstalk</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/decidim-update/" class="navigation-list-link">Updating Decidim between version</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item active">
            
            <a href="http://localhost:4000/advanced-config/" class="navigation-list-link active">Advanced config & tricks</a>
            
          </li>
        
      
    
      
        
          <li class="navigation-list-item">
            
            <a href="http://localhost:4000/hacking-decidim/" class="navigation-list-link">Hacking Decidim</a>
            
          </li>
        
      
    
  </ul>
</nav>

<hr>
Fork me on GitHub: <a class="github-button" href="https://github.com/Platoniq/decidim-install" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star Platoniq/decidim-install on GitHub">Star</a>

<script async defer src="https://buttons.github.io/buttons.js"></script>

      </div>
      <footer role="contentinfo" class="site-footer">
        <p class="text-small text-grey-dk-000 mb-0">This site uses <a href="https://github.com/pmarsceill/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll.</p>
      </footer>
    </div>
    <div class="main-content-wrap js-main-content" tabindex="0">
      <div class="page-header">
        <div class="main-content">
          
          <div class="search js-search">
            <div class="search-input-wrap">
              <input type="text" class="js-search-input search-input" tabindex="0" placeholder="Search Decidim Install guide by Platoniq" aria-label="Search Decidim Install guide by Platoniq" autocomplete="off">
              <svg width="14" height="14" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg" class="search-icon"><title>Search</title><g fill-rule="nonzero"><path d="M17.332 20.735c-5.537 0-10-4.6-10-10.247 0-5.646 4.463-10.247 10-10.247 5.536 0 10 4.601 10 10.247s-4.464 10.247-10 10.247zm0-4c3.3 0 6-2.783 6-6.247 0-3.463-2.7-6.247-6-6.247s-6 2.784-6 6.247c0 3.464 2.7 6.247 6 6.247z"/><path d="M11.672 13.791L.192 25.271 3.02 28.1 14.5 16.62z"/></g></svg>
            </div>
            <div class="js-search-results search-results-wrap"></div>
          </div>
          
          
            <ul class="list-style-none text-small mt-md-1 mb-md-1 pb-4 pb-md-0 js-aux-nav aux-nav">
              
                <li class="d-inline-block my-0"><a href="//github.com/Platoniq/decidim-install">Decidim Install on GitHub</a></li>
              
            </ul>
          
        </div>
      </div>
      <div class="main-content">
        
          
        
        <div id="main-content" class="page-content" role="main">
          <h1 id="advanced-configuration-of-decidim">Advanced configuration of Decidim</h1>

<p>Once deployed our instance of Decidim some we may want to change some settings (for instance, the available languages in a organization). As I found many aspect under-documented or missing at all, here are some options that may interest you to update/change your Decidim instance.</p>

<h2 id="change-the-available-languages-of-an-organization">Change the available languages of an organization</h2>

<p>When you first create and organization, they make you choose the available languages for it (through the <code class="highlighter-rouge">/system/</code> url). However, when you access that url to edit the organization, the language selector is not available anymore. Here is a way to update that locales manually:</p>

<p>First, be sure that your initializer file has all the locales you want:</p>

<p>Edit the file <code class="highlighter-rouge">config/initializers/decidim.rb</code> and be sure to include all the necessary locales:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">...</span>
<span class="c1"># Change these lines to set your preferred locales</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">default_locale</span> <span class="o">=</span> <span class="ss">:en</span>
  <span class="n">config</span><span class="p">.</span><span class="nf">available_locales</span> <span class="o">=</span> <span class="p">[</span><span class="ss">:en</span><span class="p">,</span> <span class="ss">:ca</span><span class="p">,</span> <span class="ss">:es</span><span class="p">,</span> <span class="ss">:fr</span><span class="p">,</span> <span class="ss">:pt</span><span class="p">]</span>
<span class="o">..</span>
</code></pre></div></div>

<p>Then you need to access the rails console and update the organization locales manually.</p>

<p>Access to your rails console with the command:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd ~/your-decidim-path
bin/rails c
</code></pre></div></div>

<p>You should view something like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Loading development environment (Rails 5.2.1)
irb(main):001:0&gt;
</code></pre></div></div>

<p>Then you need to select your organization. If you have only one organization you can just run the command:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">001</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">o</span><span class="o">=</span><span class="no">Decidim</span><span class="o">::</span><span class="no">Organization</span><span class="p">.</span><span class="nf">find</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</code></pre></div></div>

<p>By doing this we’ve fetched from the database the first item in the table <code class="highlighter-rouge">organizations</code> and assigned to the variable <code class="highlighter-rouge">o</code>. Now we can check our current locales:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">002</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">o</span><span class="p">.</span><span class="nf">available_locales</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"en"</span><span class="p">,</span> <span class="s2">"ca"</span><span class="p">,</span> <span class="s2">"es"</span><span class="p">]</span>
<span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">003</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>We can add more locales by doing this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">004</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">o</span><span class="p">.</span><span class="nf">available_locales</span> <span class="o">+=</span> <span class="p">[</span><span class="s2">"fr"</span><span class="p">,</span> <span class="s2">"pt"</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"en"</span><span class="p">,</span> <span class="s2">"ca"</span><span class="p">,</span> <span class="s2">"es"</span><span class="p">,</span> <span class="s2">"pt"</span><span class="p">,</span> <span class="s2">"fr"</span><span class="p">]</span>
<span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">005</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>or just overwrite them:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">005</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">o</span><span class="p">.</span><span class="nf">available_locales</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"en"</span><span class="p">,</span> <span class="s2">"ca"</span><span class="p">,</span> <span class="s2">"es"</span><span class="p">,</span> <span class="s2">"pt"</span><span class="p">,</span> <span class="s2">"fr"</span><span class="p">]</span>
<span class="o">=&gt;</span> <span class="p">[</span><span class="s2">"en"</span><span class="p">,</span> <span class="s2">"ca"</span><span class="p">,</span> <span class="s2">"es"</span><span class="p">,</span> <span class="s2">"pt"</span><span class="p">,</span> <span class="s2">"fr"</span><span class="p">]</span>
<span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">006</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Then we need to save them by executing the command <code class="highlighter-rouge">o.save!</code>:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">006</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span> <span class="n">o</span><span class="p">.</span><span class="nf">save!</span>
   <span class="p">(</span><span class="mf">24.1</span><span class="n">ms</span><span class="p">)</span>  <span class="k">BEGIN</span>
  <span class="no">Decidim</span><span class="o">::</span><span class="no">Organization</span> <span class="no">Exists</span> <span class="p">(</span><span class="mf">15.5</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="mi">1</span> <span class="no">AS</span> <span class="n">one</span> <span class="no">FROM</span> <span class="s2">"decidim_organizations"</span> <span class="no">WHERE</span> <span class="s2">"decidim_organizations"</span><span class="o">.</span><span class="s2">"name"</span> <span class="o">=</span> <span class="vg">$1</span> <span class="no">AND</span> <span class="s2">"decidim_organizations"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">!=</span> <span class="vg">$2</span> <span class="no">LIMIT</span> <span class="vg">$3</span>  <span class="p">[[</span><span class="s2">"name"</span><span class="p">,</span> <span class="s2">"Hayes LLC"</span><span class="p">],</span> <span class="p">[</span><span class="s2">"id"</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
  <span class="no">Decidim</span><span class="o">::</span><span class="no">Organization</span> <span class="no">Exists</span> <span class="p">(</span><span class="mf">1.8</span><span class="n">ms</span><span class="p">)</span>  <span class="no">SELECT</span>  <span class="mi">1</span> <span class="no">AS</span> <span class="n">one</span> <span class="no">FROM</span> <span class="s2">"decidim_organizations"</span> <span class="no">WHERE</span> <span class="s2">"decidim_organizations"</span><span class="o">.</span><span class="s2">"host"</span> <span class="o">=</span> <span class="vg">$1</span> <span class="no">AND</span> <span class="s2">"decidim_organizations"</span><span class="o">.</span><span class="s2">"id"</span> <span class="o">!=</span> <span class="vg">$2</span> <span class="no">LIMIT</span> <span class="vg">$3</span>  <span class="p">[[</span><span class="s2">"host"</span><span class="p">,</span> <span class="s2">"localhost"</span><span class="p">],</span> <span class="p">[</span><span class="s2">"id"</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="s2">"LIMIT"</span><span class="p">,</span> <span class="mi">1</span><span class="p">]]</span>
   <span class="p">(</span><span class="mf">0.7</span><span class="n">ms</span><span class="p">)</span>  <span class="no">COMMIT</span>
<span class="o">=&gt;</span> <span class="kp">true</span>
<span class="n">irb</span><span class="p">(</span><span class="n">main</span><span class="p">):</span><span class="mo">007</span><span class="p">:</span><span class="mi">0</span><span class="o">&gt;</span>
</code></pre></div></div>

<p>Done! your new locales should be available in your URL.</p>

<blockquote>
  <p><strong>NOTE:</strong> It’s difficult to <strong>remove</strong> languages as some content is cached in some places once generated. Removing languages can lead easily to generation of 500 errors.</p>
</blockquote>


          
        </div>
      </div>
    </div>
  </div>

</body>
</html>
